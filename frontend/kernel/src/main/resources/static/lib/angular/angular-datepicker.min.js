var Datepicker=function(){function o(e){return e%4===0&&!(e%100===0&&e%400!=0)}function u(e){var t=e.getMonth(),n=[31,o(e.getFullYear())?29:28,31,30,31,30,31,31,30,31,30,31];return n[t]}function a(t){var n=this,r=new Date(this.selectedDate),i=new Date(this.selectedDate),s=t["data"],o="days-cell",a,f;r.setDate(1);f=s.col+1+s.row*e-r.getDay();i.setDate(f);value=i.getDate();if(i.getTime()===this.selectedDate.getTime()){o+=" selected"}if(f<=0||f>u(this.selectedDate)){o+=" off"}t["class"]=o;t["onclick"]=function(){n.setSelectedDate(i)};t["value"]=i.getDate()}function f(e){function n(e){var r,i,s;if("beforebuild"in e){e["beforebuild"].call(t,e)}if(!("element"in e)){e["element"]=document.createElement(e["tag"])}if("data"in e){e["element"].data=e["data"]}if("class"in e){e["element"].setAttribute("class",e["class"])}if("value"in e){if(typeof e["value"]==="function"){e["element"].innerHTML=e["value"]()}else{e["element"].innerHTML=e["value"]}}if("onclick"in e){e["element"].onclick=e["onclick"]}if("children"in e){for(i=0,s=e["children"].length;i<s;i++){e["element"].appendChild(n(e["children"][i]))}}return e["element"]}var t=this;return n(e)}function l(e){function t(e){if("children"in e){for(i=0,max=e["children"].length;i<max;i++){t(e["children"][i])}}e["element"].parentNode.removeChild(e["element"]);e["element"]=null;delete e["element"];return e}return t(e)}function c(i,o){var u=this;o=o||{};this.onDateChanged=o.onDateChanged;this.container=i;this.monthNames=o.monthNames||n;this.dayNames=o.dayNames||r;this.elements=[];this.elements[0]={tag:"div",children:[],"class":"year"};this.elements[0]["children"][0]={tag:"a","class":"dec",onclick:function(){u.incrementMonth(-12);return false}};this.elements[0]["children"][1]={tag:"a","class":"inc",onclick:function(){u.incrementMonth(12);return false}};this.elements[0]["children"][2]={tag:"label",value:function(){return u.selectedDate.getFullYear()}};this.elements[1]={tag:"div",children:[],"class":"month"};this.elements[1]["children"][0]={tag:"a","class":"dec",onclick:function(){u.incrementMonth(-1);return false}};this.elements[1]["children"][1]={tag:"a","class":"inc",onclick:function(){u.incrementMonth(1);return false}};this.elements[1]["children"][2]={tag:"label",value:function(){return u.monthNames[u.selectedDate.getMonth()]}};this.elements[2]={tag:"div",children:[],"class":"days-names"};for(var f=0;f<e;f++){this.elements[2]["children"][f]={tag:"label",value:u.dayNames[f]}}this.elements[3]={tag:"div",children:[],"class":"days"};for(var f=0;f<t;f++){this.elements[3]["children"][f]={tag:"div",children:[],"class":"days-row"};for(var l=0;l<e;l++){this.elements[3]["children"][f]["children"][l]={tag:"div",data:{row:f,col:l},beforebuild:a}}}this.container.datepicker=this;if(o.selectedDate){this.setSelectedDate(o.selectedDate,true)}else{this.setSelectedDate(s)}}var e=7,t=6,n=["January","February","March","April","May","June","July","August","September","October","November","December"],r=["Su","Mo","Tu","We","Th","Fr","Sa"],s=new Date;c.prototype.incrementMonth=function(e){e=e||1;var t=this.selectedDate.getMonth(),n=new Date(this.selectedDate);n.setMonth(t+e);return this.setSelectedDate(n)};c.prototype.setSelectedDate=function(e,t){if(!e||!!this.selectedDate&&this.selectedDate.getTime()===e.getTime()){return}this.selectedDate=e;this.build();if(typeof this.onDateChanged==="function"&&!t){this.onDateChanged(e)}return this.selectedDate};c.prototype.build=function(){for(var e=0,t=this.elements.length;e<t;e++){this.container.appendChild(f.call(this,this.elements[e]))}return this.container};c.prototype.destroy=function(){for(var e=0,t=this.elements.length;e<t;e++){l.call(this,this.elements[e])}this.container.parentNode.removeChild(this.container);this.container=null;return this.selectedDate};return c}()
